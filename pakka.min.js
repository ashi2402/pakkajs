!function(e,n){if("function"==typeof define&&define.amd)define(["lodash"],n);else if("object"==typeof module&&module.exports){var t=require("lodash");module.exports=n(t)}else e.pakka=n(_)}(this,function(e){var n=document.getElementsByTagName("head")[0],t=0,i=0,r=["abort","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","show","stalled","submit","suspend","timeupdate","toggle","volumechange","waiting","webkitfullscreenchange","webkitfullscreenerror","wheel","touchstart","touchend","touchmove","touchcancel"],o=function(n){var r,o=n.name||"component-"+t++;return n.controller||(n.controller=function(){}),function(){var t,u=this;u.$properties={};u.$get=function(n){try{return e.get(u.$properties,n)}catch(e){}},u.$set=function(n,t){e.set(u.$properties,n,t),E(u,n,t,!0,!0)},u.$getSet=function(e,n){var t=u.$get(e);return u.$set(e,n(t)),u},u.$clear=function(e){return u.$set(e,void 0),u},u.$push=function(n,t){return u.$getSet(n,function(n){return e.isArray(n)&&n.push(t),n}),u},u.$name=o,u.$options=n;var a=u.$id=o+"-"+i++;s(r)&&(r=b(n.css||"",o,r)),u.$setCss=function(e){t=b(e||"",u.$componentId,t)},u.$setElements=function(e){$(u),y(u),u.$propertyBindings={},u.$listeners=[],u.$elements=e,m(e,function(e){U(e,o),U(e,a),k(e,u,a),L(e,u,a)})},u.$attachEvent=function(e,n,t,i){S(e,n,t,u,i)},u.$setHtml=function(e){var t=document.createElement("div");t.innerHTML=n.html||"<div></div>",u.$setElements(c(t.children))},s(n.elements)?u.$setHtml(n.html):u.$setElements(n.elements),u.$detachEvents=function(e){$(u,e)},u.$removePropertyBindings=function(){y(u)},u.$destroy=function(){e.isFunction(u.beforeDestroy)&&u.beforeDestroy(),m(d,function(e){e&&e.$destroy&&e.$destroy()}),$(u),u.$stopListening(),y(u),m(u.$propertyBindings,function(e,n){u.$set(n,void 0)}),m(u.$elements,function(e){e.remove()});var n=e.isFunction(u.afterDestroy)&&u.afterDestroy;m(u,function(e,n){delete u[n]}),delete u,delete f,n&&n()},u.$watch=function(e,n){return B(null,u,"watch",function(e,t,i){var r=i.$get(t);return function(e){n&&n(e,r),r=e}},e)},u.$unwatch=function(e){C(u,e)},u.$getWatch=function(e,n){return n(u.$get(e)),u.$watch(e,n)};var l=[];u.$listen=function(n,t,i){if(e.isFunction(n.$watch)){var r={component:n,handle:n.$watch(t,i)};return l.push(r),r}},u.$stopListening=function(n){n?(n.component&&e.isFunction(n.component.$unwatch)&&n.component.$unwatch(n.handle),l=e.filter(l,function(e){return n!=e})):(m(l,function(n){n.component&&e.isFunction(n.component.$unwatch)&&n.component.$unwatch(n.handle)}),l=[])};var d=[];u.$createChild=function(e,n){var t=new e(n);return u.$addChild(t),t},u.$addChild=function(e){return d.push(e),u},u.$removeChild=function(n){return d=e.filter(d,function(e){return e!=n}),u},u.$createCallback=function(e){return function(){u&&u.$set&&e.apply(e,arguments)}};var f=new n.controller(u)}};o.version="1.2.1";var c=o.select=function(e){a(e)&&(e=document.querySelectorAll(e));var n=[];return m(e,function(e){n.push(e)}),n},u=o.create=function(e){return e?a(e)?e={elements:c(e)}:e.elementsSelector&&(e.elements=c(e.elementsSelector)):e={},new(o(e))},a=(o.createMany=function(e){var n=[],t=c(e);return m(t,function(e){var t={elements:[]};t.elements.push(e),n.push(u(t))}),n},o.isString=e.isString),s=o.isUndefined=e.isUndefined,l=o.isNil=e.isNil,d=o.isObject=e.isObject,f={},p=f.constructor.toString(),v=o.isSimpleObject=function(e){return!!d(e)&&e.constructor.toString()==p},h=o.isArray=e.isArray,m=o.each=e.each,$=o.detachEvents=function(e,n){var t=[];m(e.$listeners,function(i){s(n)||i.namespace===n?(g(i.event,i.element,i.handler,e),delete i):t.push(i)}),s(n)?delete e.$listeners:e.$listeners=t},g=o.detachEvent=function(e,n,t,i){n.removeEventListener?g=o.detachEvent=function(e,n,t,i){n.removeEventListener(e,t,!1)}:n.detachEvent&&(g=o.detachEvent=function(e,n,t,i){n.detachEvent("on"+e,t)}),g(e,n,t,i)},y=o.removePropertyBindings=function(e,n){m(e.$propertyBindings,function(t,i){if(s(n))delete e.$propertyBindings[i];else{var t=e.$propertyBindings[i],r=[];m(t,function(e){e.namespace!=n&&r.push(e)}),e.$propertyBindings[i]=r}})},b=o.addStyleSheet=function(e,t,i){return s(i)&&(i=document.createElement("style"),i.setAttribute("id",t),n.appendChild(i)),i.innerHTML=e,i},E=o.apply=function(e,n,t,i,r){if(s(n))m(e.$propertyBindings,function(n,t){E(e,t,e.$get(t))});else if(m(e.$propertyBindings[n],function(e){e.callback(t)}),!0===i&&(h(t)?m(t,function(t,i){E(e,n+"["+i+"]",t,!0,!1)}):v(t)&&m(t,function(t,i){E(e,n+"."+i,t,!0,!1)})),!0===r){var o=n.split(".");if(o.pop(),o.length>0){var c=o.join(".");E(e,c,e.$get(c),!1,!0)}}},w=o.empty=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},k=o.linkBinders=function(e,n,t){m(x,function(i,r){var o=e.querySelectorAll("["+r+"]");e.hasAttribute(r)&&B(e,n,t,i,r),m(o,function(e){B(e,n,t,i,r)})})},B=o.linkerFunction=function(e,n,t,i,r){var o=e?e.getAttribute(r):r,c=n.$propertyBindings[o]||[],u={namespace:t,callback:i(e,o,n)};return c.push(u),n.$propertyBindings[o]=c,{prop:o,binding:u}},C=o.unlinkerFunction=function(n,t){var i=n.$propertyBindings[t.prop];i&&(n.$propertyBindings[t.prop]=e.filter(i,function(e){return e!=t.binding}))},L=o.attachEvents=function(e,n,t){m(n.eventsList||n.$options.eventsList||o.eventsList||r,function(i){var r=i+"-handle",o=e.querySelectorAll("["+r+"]"),c=function(e){var o=e.getAttribute(r);S(i,e,function(e){n[o]&&n[o](e)},n,t)};e.hasAttribute(r)&&c(e),m(o,c)})},S=o.attachEvent=function(e,n,t,i,r){n.addEventListener?S=o.attachEvent=function(e,n,t,i,r){A(e,n,t,i,r),n.addEventListener(e,t,!1)}:n.attachEvent&&(S=o.attachEvent=function(e,n,t,i,r){A(e,n,t,i,r),n.attachEvent("on"+e,t)}),S(e,n,t,i,r)},A=o.pushListener=function(e,n,t,i,r){i.$listeners.push({element:n,event:e,handler:t,namespace:r})},x={},T=o.addBinder=function(e,n){x[e]=n},N=function(e){return s(e)?"":d(e)?JSON.stringify(e):e};T("bind-repeat",function(e,n,t){var i=(document.createElement("div"),e.getAttribute("var-name")),r=e.getAttribute("var-key"),c=e.getAttribute("var-index"),u={},a=o({html:e.innerHTML});return e.innerHTML="",function(o){var s=h(o),f=d(o);if(!l(o)&&(s||f)){var p={};m(o,function(o,l){var d=p[o]=u[o];if(delete u[o],!d){d=p[o]=new a,d.$parent=t;var f,v;s?(f=n+"["+l+"]",v=c):(f=n+"."+l,v=r),t.$watch(f,function(e){d.$set(i,e)}),d.$set(v,l)}m(d.$elements,function(n){e.appendChild(n)})}),m(u,function(n){m(n.$elements,function(n){e.removeChild(n)})}),u=p}}});T("bind-html",function(e,n,t){var i="bind-html-"+F++;return function(n){$(t,i),y(t,i),e.innerHTML=N(n),k(e,t,i),L(e,t,i)}});var F=0,H=function(e){return e.value},j=function(e,n){e.value=n},M=function(e){return e.checked},D=function(e,n){e.checked=n},q=function(e){return e.values},O=function(e,n){e.values=n},I=function(e){return e.innerText},P=function(e,n){e.innerText=n};T("bind-property",function(e,n,t){var i="bind-property-"+F++,r=!1,o=function(e){var i=e.keyCode;16!=i&&17!=i&&18!=i&&(r=!0,t.$set(n,c(e.target)))},c=H,u=j;return m(e.attributes,function(e){if("type"==e.name&&"checkbox"==e.value)return c=M,u=D,!1}),"SELECT"==e.tagName?(c=q,u=O):"DIV"==e.tagName&&(c=I,u=P),m(["change","keyup"],function(n){S(n,e,o,t,i)}),function(n){r?r=!1:l(n)||u(e,n)}}),T("bind-text",function(e,n,t){return function(n){e.innerText=N(n)}}),T("bind-component",function(e,n,t){return function(n){w(e),l(n)||m(n.$elements,function(n){e.appendChild(n)})}}),T("bind-components",function(e,n,t){var i={};return w(e),function(n){!l(n)&&h(n)||(n=[]);var t={};m(n,function(n){var r=n.$id;delete i[r],t[r]=n,m(n.$elements,function(n){e.appendChild(n)})}),m(i,function(n){m(n.$elements,function(n){e.removeChild(n)})}),i=t}});var U=o.addClass=function(e,n){(U=o.addClass=e.classList?function(e,n){e.classList.add(n)}:function(e,n){e.className+=" "+n})(e,n)},z=o.removeClass=function(e,n){(z=o.removeClass=e.classList?function(e,n){e.classList.remove(n)}:function(e,n){e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")})(e,n)};return o.addBinder("bind-class",function(e,n,t){var i={};return function(n){m(i,function(e,n){i[n]=!1}),h(n)?m(n,function(e){i[e]=!0}):a(n)?i[n]=!0:d(n)&&m(n,function(e,n){i[n]=e}),m(i,function(n,t){!0===n?U(e,t):z(e,t)})}}),o.addBinder("bind-element",function(e,n,t){return t.$set(n,e),function(){}}),o.addBinder("bind-attributes",function(e,n,t){return function(n){d(attributes)&&m(attributes,function(n,t){e.setAttribute(t,n)})}}),o.addBinder("bind-href",function(e,n,t){return function(n){e.href=n}}),o});